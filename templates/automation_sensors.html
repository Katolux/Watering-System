{% extends "base.html" %}
{% block content %}

<h2>ðŸ”§ Sensors Management</h2>

<!-- ================= ADD SENSOR ================= -->

<h3>Add sensor</h3>

<form method="post" action="/automation/sensors/add">
  <label>
    Sensor ID:
    <input type="text" name="sensor_id" required>
  </label>

  <label>
    Active:
    <select name="active">
      <option value="1">Yes</option>
      <option value="0">No</option>
    </select>
  </label>

  <button type="submit">Add sensor</button>
</form>

<hr>

<!-- ================= ASSIGN SENSOR ================= -->

<h3>Assign sensor to bed</h3>

<form method="post" action="/automation/sensors/assign">
  <label>
    Sensor:
    <select name="sensor_id" required>
      {% for s in sensors %}
        <option value="{{ s[0] }}">{{ s[0] }}</option>
      {% endfor %}
    </select>
  </label>

  <label>
    Bed:
    <select name="bed_id" required>
      {% for b in beds %}
        <option value="{{ b[0] }}">{{ b[0] }}</option>
      {% endfor %}
    </select>
  </label>

  <button type="submit">Assign</button>
</form>

<hr>

<!-- ================= LIST ================= -->

<h3>Registered sensors</h3>

<ul>
{% for sensor_id, bed_id, active in sensors %}
  <li>
    {{ sensor_id }}
    â†’
    {% if bed_id %}
      {{ bed_id }}
    {% else %}
      (unassigned)
    {% endif %}
    {% if not active %}(inactive){% endif %}
  </li>
{% endfor %}
</ul>

<a href="/automation">â¬… Back to Automation</a>

{% endblock %}
